<!DOCTYPE html>
<html>
  <head>
    <title>MWB Search</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/elasticlunr/0.9.6/elasticlunr.min.js"></script>
    {% if lunr_index_sitepath != '' %}
    <script src="{{lunr_index_sitepath}}"></script>
    {% endif %}
    <style>
      ul#resList{list-style-position: inside}
      li.item{list-style:none; padding:5px;}
    </style>
  </head>
  <body>
    <p><a href="/">[Home]</a>
      <br><br><br>
    <input type="text" placeholder="Type" id="inputID">
    <button type="button" onclick="doSearch();">Search</button>
    <script>
          function doSearch() {
	  let searchString=document.getElementById("inputID").value;
	  var ul = document.createElement('ul');
	  ul.setAttribute('id','resList');
	  const searchResultList = [];
	  for(let res of lunr_index.search(searchString)) {
	    let entry = { "title": res['doc']['title'], "link": res['doc']['link'] }
	    searchResultList.push(entry);
	  }
//	  console.log("searchResultList: ", searchResultList);
	  document.getElementById('renderList').appendChild(ul);
          searchResultList.forEach(renderResultList);
	  function renderResultList(element, index, arr) {
            var anchor = document.createElement('a');
            anchor.append(document.createTextNode(`${element['title']}`));
            anchor.setAttribute('class', 'wikilink');
            anchor.setAttribute('href',`${element['link']}`);
            var li = document.createElement('li');
            li.setAttribute('class','item');
            li.append(anchor);
            ul.append(li);
          }
      }
    </script>

<div id="renderList"></div>

  </body>
</html>
